Cheers!!! You've gained a crucial lesson: never bet on seemingly harmless external calls.
Always assume that the receiver of the funds can be another contract, and letting the contracts in an inconsistent state could mess up the logic, even though the function is guarded.

Re-entrancy has many faces and you should always be prepared for it. Don't be outbet!